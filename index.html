<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸ—ºï¸ Gemini ê¸°ë°˜ ì—¬í–‰ ì¼ì • ìƒì„±ê¸°</title>
</head>
<body>
  <h1>ğŸ—ºï¸ ì—¬í–‰ ì¼ì • ìë™ ìƒì„±ê¸° (Google Gemini API)</h1>

  <button id="generateBtn">ì—¬í–‰ ì¼ì • ìƒì„±í•˜ê¸°</button>

  <h2>ğŸ“‹ ê²°ê³¼</h2>
  <pre id="result"></pre>

  <script type="module" src="scripts.js"></script>
  <script type="module">
    import { generatePlanFromGemini } from './scripts.js';
    
    // localStorageì—ì„œ ê°’ ë¶ˆëŸ¬ì˜¤ê¸°
    const filteredItems = JSON.parse(localStorage.getItem('filteredItems') || '[]');
    const startDate = localStorage.getItem('startDate') || '2025-05-01';
    const endDate = localStorage.getItem('endDate') || '2025-05-03';

    // í”„ë¡¬í”„íŠ¸ìš© ì¥ì†Œ ë¬¸ìì—´
    const placesPrompt = filteredItems.map(item => `${item.placeName}(${item.category})`).join(', ');

    // í”„ë¡¬í”„íŠ¸ ìƒì„±
    function makePrompt(startDate, endDate, placesPrompt) {
      return `ë‚ ì§œ: ${startDate} ~ ${endDate}
ì¥ì†Œ: ${placesPrompt}
ì•„ë˜ ì¥ì†Œë§Œ ì‚¬ìš©í•´ì„œ ì—¬í–‰ ì¼ì •ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”. ì ˆëŒ€ë¡œ ë‹¤ë¥¸ ì¥ì†Œë¥¼ ì¶”ê°€í•˜ì§€ ë§ˆì„¸ìš”.
ì¡°ê±´:
- í•˜ë£¨ì— ê°™ì€ ì¹´í…Œê³ ë¦¬(ì˜ˆ: ì‹ë‹¹, ì¹´í˜, ê´€ê´‘ì§€ ë“±)ë§Œ ëª°ë¦¬ì§€ ì•Šê²Œ ê³¨ê³ ë£¨ ì„ì–´ì„œ ë°°ì¹˜í•´ì¤˜.
- ë‚ ì§œë³„ë¡œ ì¥ì†Œë¥¼ ë‚˜ëˆ ì„œ, ê° ë‚ ì§œë§ˆë‹¤ ë‹¤ì–‘í•œ ì¹´í…Œê³ ë¦¬ê°€ í¬í•¨ë˜ë„ë¡ í•´ì¤˜.
- ìš´ì˜ì‹œê°„ê³¼ ìœ„ì¹˜ë¥¼ ê³ ë ¤í•´ì„œ ìµœì ì˜ ë™ì„ ìœ¼ë¡œ ì§œì¤˜.
- í•˜ë£¨ì— ìµœëŒ€ 5ê°œ ì¥ì†Œë§Œ í¬í•¨í•´ì¤˜.
- ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì€ json í¬ë§·ìœ¼ë¡œë§Œ ë°˜í™˜í•´ì¤˜. ë¶€ì—°ì„¤ëª…ì€ í•„ìš”ì—†ì–´.
[
  {
    Date: 2025-05-01,
    Places: [ì¥ì†Œ1, ì¥ì†Œ2, ...]
  },
  ...
]`;
    }
    const customPrompt = makePrompt(startDate, endDate, placesPrompt);

    document.getElementById('generateBtn').addEventListener('click', () => {
      generatePlanFromGemini(filteredItems, startDate, endDate, customPrompt);
    });
  </script>
</body>
</html>
